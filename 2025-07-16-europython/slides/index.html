<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>The Pydantic stack for AI apps</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/pydantic.css" />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    <style>
      .twocolumn {
          display: flex;
      }
      .col {
          flex: 1;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1 class="r-fit-text">The Pydantic stack for AI apps</h1>
          <p>EuroPython, Prague, 16 July 2025</p>
        </section>
        <section>
          <h2>Meet Laura & Victorien</h2>
          <p>Placeholder for img</p>
        </section>
        <section>
          <h2>The Pydantic Stack</h2>
          <p>Placeholder for 3 lib graphic</p>
        </section>
		    <section>
          <h2>Setting the scene</h2>
        </section>
		<section>
          <h2>Agents, models, tools, MCP, A2A</h2>
		  <ul>
			<li class="fragment">Agents: LLMs + agency (interaction with the world)</li>
			<li class="fragment">Models: Foundation providers, open source, fine-tunes</li>
			<li class="fragment">Tools: How agents interact with the world</li>
			<li class="fragment">MCP: Model Control Protocol</li>
			<li class="fragment">A2A: Agent-to-Agent protocol</li>
		  </ul>
		  <aside class="notes">Discuss opportunities and engineering challenges</aside>	
        </section>
		<section>
			<h2>Creating agents with Pydantic AI</h2>
		</section>
        <section>
          <h2>Building our ghost writer agent</h2>
        </section>
        <section>
          <video id="chatgpt-first-use" data-autoplay autoplay src="./assets/chatgpt_first_use.mp4" type="video/mp4" />
        </section>
        <section>
          <h2>The Pydantic AI framework</h2>
        </section>
        <section>
          <!-- TODO two columns layout is really off (crazy that reveal.js doesn't support this out of the box?) -->
          <div class="twocolumn">
            <div class="col">
              <!-- TODO rework images, maybe just use text (FastAPI + SQLAlchemy) instead -->
              <img width="100" src="./assets/fastapi_logo.png">
              <img width="150" src="./assets/sqlalchemy_logo.svg">
              <pre>
                <code data-trim class="language-python" data-line-numbers="1-3|2|3">
                  @app.get('/attendees/{id}')
                  def get_attendee(id: int) -> Attendee:
                      return select(Attendee).where(Attendee.id == id)
                </code>
              </pre>
            </div>
            <div class="col">
              Pydantic AI
              <pre>
                <code data-trim class="language-python" data-line-numbers="1-4|3|2">
                  agent = Agent(
                      'google-vertex:gemini-2.5-pro',
                      output_type=Annotated[int, Interval(ge=1, le=10)],
                      system_prompt='Give me a number between 1 and 10.',
                  )
                </code>
              </pre>
            </div>
          </div>
        </section>
        <section data-auto-animate>
            <h2>Implementing the ghost writer</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers="1-5|3|1-5">
                writer_agent = Agent(
                    'anthropic:claude-3-7-sonnet-latest',
                    output_type=str,
                    instructions='You are writing a blog post for the Pydantic blog.',
                )
              </code>
            </pre>
        </section>
        <section data-auto-animate>
            <h2>Implementing the ghost writer</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers="1-5">
                @dataclass
                class AgentDeps:
                    blog_author: str
                    reference_links: list[str]

                writer_agent = Agent(
                    'anthropic:claude-3-7-sonnet-latest',
                    output_type=str,
                    instructions='You are writing a blog post for the Pydantic blog.',
                )
              </code>
            </pre>
        </section>
        <section data-auto-animate>
            <h2>Implementing the ghost writer</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers="10|1-11">
                @dataclass
                class AgentDeps:
                    blog_author: str
                    reference_links: list[str]

                writer_agent = Agent(
                    'anthropic:claude-3-7-sonnet-latest',
                    output_type=str,
                    deps_type=AgentDeps,
                    instructions='You are writing a blog post for the Pydantic blog.',
                )
              </code>
            </pre>
        </section>
        <section data-auto-animate>
            <h2>Implementing the ghost writer</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers="13-17">
                @dataclass
                class AgentDeps:
                    blog_author: str
                    reference_links: list[str]

                writer_agent = Agent(
                    'anthropic:claude-3-7-sonnet-latest',
                    output_type=str,
                    deps_type=AgentDeps,
                    instructions='You are writing a blog post for the Pydantic blog.',
                )

                await writer_agent.run(
                  'Write a blog post about...',
                  deps=AgentDeps(blog_author='Victorien', ...),
                )
              </code>
            </pre>
        </section>
        <section data-auto-animate>
            <h2>Implementing the ghost writer</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers>
                @writer_agent.instructions
                def add_author_info(ctx: RunContext[AgentDeps]) -> str:
                    return f"""
                    Author: {ctx.deps.blog_author}
                    Links you may query: {', '.join(ctx.deps.reference_links)}
                    """"
              </code>
            </pre>
        </section>
        <section data-auto-animate>
            <h2>Introducing tools</h2>
        </section>
        <section data-auto-animate>
            <h2>Introducing tools</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers="1-12|2">
                @agent.tool_plain
                def extract_technical_content(url: HttpUrl) -> str:
                    """Extract technical content from one of the reference links."""

                    response = requests.get(str(url))

                    return trafilatura.extract(
                        response.text,
                        output_format="html",
                        favor_precision=True,
                        include_tables=True,
                    )
              </code>
            </pre>
        </section>
        <section>
            <h2>Quick recap</h2>
            <pre data-id="code-animation">
              <code data-trim class="language-python" data-line-numbers>
                writer_agent = Agent(
                    'anthropic:claude-3-7-sonnet-latest',
                    output_type=str,
                    deps_type=AgentDeps,
                    instructions='You are writing a blog post for the Pydantic blog.',
                )

                @writer_agent.instructions
                def add_author_info(ctx: RunContext[AgentDeps]) -> str:
                    ...

                @agent.tool_plain
                def extract_technical_content(url: HttpUrl) -> str:
                    ...
              </code>
            </pre>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });

      const chatgptVideo = document.getElementById('chatgpt-first-use');
      chatgptVideo.playbackRate = 2.0;
    </script>
  </body>
</html>
